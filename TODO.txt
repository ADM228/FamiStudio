4.2.0
=====
/ Finish phase reset
	- NesSndEmu : Fix VRC6 square/saw emulation.
	- NesSndEmu : FDS/N163, review our use of "delay", a bit sketchy.
- Update localization files and tell localizer to translate.
/ Switch to .NET for Android too.
	- Setup keystore, etc.
	- Bring back APK

4.2.0 Testing/Packaging
=======================
- Test all project explorer buttons with folders. Make sure no offsets.
- Make sure double-click delete doesnt create 2 transaction (delete + multiple delete operation)
- Make sure PortAudio.dll is included in portable + setup.
- Add new features to unit tests
- Run huge sound engine test with old songs.
- Dont publish for chromebooks
- Write S5B documentation.
- Android : Run short/1-frame tests.
- Test MacOS .NET startup script.

4.2.0 Change Log
===========================
- Changes:
	* S5B envelope support (S5B & EPSM)
	* FDS auto-modulation support
	* FDS emulation improvements : Proper filtering, DAC emulation & fixes.
	* Phase reset support
	* Accurate seek support (fully emulate entire song from start)
	* Allow disabling attack on notes if all instrument envelopes matches (useful for FM channels)
	* Folders in Project Explorer
	* More filtering options for audio expansions & ability to store settings in project
	* Support for up to 256 instruments (for both regular and expansion) in sound engine
	* Reduced audio latency on all platform and switch to WASAPI on Windows
	* Video export improvements: 
		* Unified piano roll mode
		* Piano roll 3D effect
		* Option to overlay registers
		* Preview mode
	* Small quality of life improvements:
		* Eraser mode
		* Ability to copy samples between instruments
		* Ability to type effect values and project explorer parameters
		* Function to replace specific instruments
		* Logarithmic sliders for effects and parameters with huge values
- Breaking/Behavior changes:
	* FDS mod speed/depth effects will be resetted to the instrument values on notes with an attack.
	* FDS emulation now matches the hardware much more closely. Some instruments may now sound very different.
	* S5B/EPSM noise no longer has a "NOP" frequency, noise frequency will be set if it is enabled by the mixer envelope. 
- System requirement changes:		
	* Upgraded to .NET 7.0
	* Minimum OpenGL requirement lowered to OpenGL 3.0 (was 3.3)

Later
=====
- Borrow TNS-HFC3 from forple in sept/oct.

dotnet publish
==============
- dotnet publish /p:Configuration=Release /p:Platform="x64" ../FamiStudio/FamiStudio.csproj -r win-x64 -c Release -f net5.0 --self-contained
- Copies all the runtime with the build, kind of weird.

Linux notes 
=========== 
- When slow startup in VM : dbus-launch --exit-with-session mono FamiStudio.exe 
- How to recompile with old linux: 
	- Ubuntu 16.04.6 
	- Install cmake-gui 
	- OpenAL Soft 
		- Install ALSA libs (libasound2-dev) 
		- Download openal-soft code 
		- Run cmake-gui in /build folder. 
		- Configure 
		- Choose static C + C++ libs 
		- Choose Release (no debug info) 
		- Generate. 
		- make! 
	- OGG:
		- Download ogg/vorbis code
		- cmake-gui, static lib, configure
		- CMakeFiles/vorbis.dir/flags.make, add -fPIC
			C_FLAGS = -O3 -DNDEBUG -fPIC 
		- Same for OGG
	- NesSndEmu + NotSoFatso, run script. 
	- RtMidi, need to add static C/C++ libs to cmake file. 
 
MacOS notes
===========
- MacOS Sierra, fully patched is 10.12.6, with AppKit version 1504.83.101
- Must compile vorbis on old version too (like Sierra). 
- If problem installing MacOS VM, see @DOUG fix at
  https://www.geekrar.com/how-to-fix-the-cpu-has-been-disabled-by-the-guest-os/
	cpuid.0.eax = "0000:0000:0000:0000:0000:0000:0000:1011"
	cpuid.0.ebx = "0111:0101:0110:1110:0110:0101:0100:0111"
	cpuid.0.ecx = "0110:1100:0110:0101:0111:0100:0110:1110"
	cpuid.0.edx = "0100:1001:0110:0101:0110:1110:0110:1001"
	cpuid.1.eax = "0000:0000:0000:0001:0000:0110:0111:0001"
	cpuid.1.ebx = "0000:0010:0000:0001:0000:1000:0000:0000"
	cpuid.1.ecx = "1000:0010:1001:1000:0010:0010:0000:0011"
	cpuid.1.edx = "0000:0111:1000:1011:1111:1011:1111:1111"
- If NAT network doesnt work (problem is only in Monterey right now) do that:
	ethernet0.virtualDev = "vmxnet3"

Convert PNG to TGA
==================
"c:\Program Files\ImageMagick-7.1.0-Q8\magick.exe" mogrify -path D:\Dump\Icons\Out\Tga -compress RLE -format tga *.png

Android Notes
=============
Key Store
- Alias : FamiStudio
- Pass : Usual x2
- 30 Years
- Only full name entered.
Issues with device monitor not starting:
- Remove new java (11, the one from Microsoft) from the path. Keep the old one (eclipse, 8).
- "C:\Program Files (x86)\Android\android-sdk\tools\lib\monitor-x86_64\monitor.exe"

set Path=C:\Program Files (x86)\SCE\ORBIS SDKs\11.000\host_tools\bin;C:\Program Files (x86)\SCE\Prospero SDKs\8.000\host_tools\bin;C:\Program Files (x86)\SCE\Prospero\Tools\Publishing Tools\bin;C:\Program Files (x86)\SCE\Common\SceVSI-VS17\bin;C:\Program Files (x86)\SCE\Prospero\Tools\Target Manager Server\bin;C:\Program Files (x86)\SCE\ORBIS\Tools\Target Manager Server\bin;C:\Program Files (x86)\Common Files\Intel\Shared Libraries\redist\intel64\compiler;C:\Program Files (x86)\SCE\Common\SceVSI-VS16\bin;C:\Program Files (x86)\VMware\VMware Player\bin\;C:\Program Files (x86)\SCE\ORBIS\Tools\Publishing Tools\bin;C:\Program Files\Eclipse Foundation\jdk-8.0.302.8-hotspot\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Perforce\;C:\Program Files\dotnet\;C:\Program Files (x86)\SCE\ORBIS\Tools\New Razor GPU\bin\CommandTools\bin;C:\Program Files (x86)\Windows Kits\10\Windows Performance Toolkit\;C:\Program Files (x86)\SCE\Prospero\Tools\PS4 Razor GPU for Prospero\bin\CommandTools\bin;C:\Program Files (x86)\SCE\Prospero\Tools\Razor GPU\bin\CommandTools\bin;C:\Users\bleub\AppData\Local\Programs\Python\Python311\Scripts\;C:\Users\bleub\AppData\Local\Programs\Python\Python311\;C:\Users\bleub\AppData\Local\Microsoft\WindowsApps;C:\Users\bleub\AppData\Local\GitHubDesktop\bin;C:\Users\bleub\.dotnet\tools;C:\Users\bleub\AppData\Local\gitkraken\bin;C:\Users\bleub\.dotnet\tools

Desktop tutorial GIFs
=====================
- 20 fps
- Add mouse highlights
- Add 1px border
- Not global palette (buggy, creates grayscale images sometimes)

Trailer/scroll 
============== 
- Need to install System.Drawing.Common 5.0.3
- Change net5.0 to net5.0-windows
- Stashed in 933bf502b3f46d8d9fda25fb815cc7602479b4b6. 
 
MkDocs 
====== 
- Install Python 
- pip install mkdocs 
- pip install mkdocs-bootswatch 
- pip install mkdocs-meta-descriptions-plugin
- Modify "%localappdata%\Programs\Python\Python311\Lib\site-packages\mkdocs\themes\mkdocs\base.html"
		{% if page.meta and page.meta.description %}
		<meta name="description" content="{{ page.meta.description }}">
		{% elif config.site_description %}
		<meta name="description" content="{{ config.site_description }}">
		{% endif %}
 
Discord 
======= 
- Invite link: https://discord.gg/88UPmxh 

Backlog: 
=========
- Project cleanup : organize insturments/folders by expansion
- Android media player notification option
- Allow changing vibrato depth without resetting (vibrato speed will still reset for the time being)
	- Dont compress vibrato envelopes.
	- New opcode "override envelope and reset", call only when speed changes.
	- Kawashin N163 comparison with NSFPLAY, listen to Wave 1 isolated. (https://discord.com/channels/@me/1093046594062004286/1183464431674470570)
- BUG : Why does Mesen play NSF ~0.3% to ~0.4% faster than us? Export a wav and compare. Affects both ROM and NSF.
- Paste FX values from text. Kain wanted to change DAC slowly, had values to paste. 
- Simple parameters for instruments (duty, volume)
- Export selection. 
	https://discord.com/channels/@me/819772561940152321/1202138717054304306
- Wome kind of warning if multiple VRC7 patch-0 instrument overlaps?
- Can we keep undo/redo buttons on screen to 1280px? Like hide metronome, etc.
- A way to view the preview effect value (grey rectangle). Either draw it on the left edge, or in the piano roll tolltip.
	https://discord.com/channels/@me/819772561940152321/1157075515199475732
- Bug import N163 instruments
	https://discord.com/channels/@me/819772561940152321/1154660603617607741
- Low slide notes going down + arp going up = glitch. Fix idea : Internally modify the arp to make it less strong based on slide range (ex: div by 4 if doing down 2 octaves).
  https://discord.com/channels/747649221879922840/1024388342210642150/1147714295581388910
- Android encoder bitrate is messed up.
- When multiple VRC7 instrument all use patch 0 at same time (like on first note), they all upload it. Its stupid. Only the first one should, or something like that.
- OSC trigger assert 
- Option to keep unused samples when exporting to sound engine. 
	=> Shelved, will need more work.
- How to add to the "open with" list on Android.
- Better autosave names?
- Delete instruments resets play head.
- Export DMC samples on Mobile.
- Option to set snapping auto depending on last resize.
- "Read only" N163 instrument. Just specify RAM position + size. Other instruments will do the writing.
- NSF import issue TF74
- FDS oscilloscope can assert if you use modulation table to produce very low sound.
- Fix "SeparateChannelsExportTndMode"
- Dual APU (VT02) support? Mesen doesnt support it, fuck it. 
- S5B is 1 octave off. Periods are 12 bits, so technically can do lower, but we still bottom at A0???
- Shy mode on mobile?
- BUG : Quit menu does nothing on MacOS
- Weird shift when using an external display with different scaling (ex: 100% vs 150%)
- Add effect to select N163 wave. How does it react in FT.
- Full range volume for expansions?
- Different aspect ratios for video export? Somebody asked for square
- Improve linux file dialog (Steo feedback)
- Idea from perkka "When an instrument is selected. Have the channels thats not supported by it slightly faded out, or the channel names that support it in bold or something"
- Do a pass on tooltips for ParamProviders.
- Left resize to preserve release position?
- Display number of selected channels in grid for video export?
- BUG : Drag single pattern (with one note covring the entire pattern) from 1 channel to the other while its playing, the old note keeps playing and adds on top.
- BUG : "theres a bug where when you select a pattern multiple times and you try to change a note, the change is multiplied by the # of patterns you selected", see video.
- Reorder channels for video export.
- Overclocking (2x, 3x, 4x would be a good start).
- Hardware sweep (how to not conflict with smooth vibrato?)
- Scales
- Raw FDS modulation table envelope. 
- Sound output selection?
- Give better names to auto saves
- Android : Starting scroll on a slider (in vrc7 instrument) changes the value. How to fix???
- Cleanup : remove duplicated fx values (ex: same volume applied multiple times)
- Paste special, option to rename patterns.
- Uncompressed envelopes
- CLI only EXE (Linux only).
- C0 is hidden by scroll bars
- Piano roll scale on desktop?
- Poppin issue on FDS? See messages from "JHĀKRI" on discord. Change volume on FDS with a blank waveform.
- Dont reset camera in piano roll when deleting instrument (probably to handle case where you were editing the instrument)
- Length counter support? https://www.youtube.com/watch?v=Fg8B3kiVckY
- Double-click to edit name of instrument
- Way to tell if a pattern has other instances, like highlight all instances when mouse over? 
- There is no vertical scaling in effect. Vertical scaling is done with piano, there is no piano.
	https://discord.com/channels/747649221879922840/747649222354010173/1206908564262617151
- Option to remove high-pitch from triangle. Mesen has an option, but that's now what we need. I think how2B wants more filtering. Filtering options per channel type?
	https://discord.com/channels/@me/819772561940152321/1187597131859636276
- Select all/none for list of songs in export dialog
	https://discord.com/channels/747649221879922840/747649222354010173/1209404796428357652